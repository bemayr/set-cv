{"version":3,"sources":["webpack:///../node_modules/fast-safe-stringify/index.js","webpack:///../node_modules/@xstate/inspect/es/utils.js","webpack:///../node_modules/@xstate/inspect/es/browser.js","webpack:///../node_modules/@xstate/inspect/es/inspectMachine.js","webpack:///../node_modules/@xstate/inspect/es/_virtual/_tslib.js"],"names":["stringify","obj","replacer","spacer","res","decirc","undefined","replacerStack","length","JSON","replaceGetterValues","arr","part","pop","Object","defineProperty","val","k","stack","parent","i","propertyDescriptor","getOwnPropertyDescriptor","get","configurable","value","push","Array","isArray","keys","key","compareFunction","a","b","deterministicStringify","tmp","deterministicDecirc","toJSON","sort","v","splice","call","this","module","exports","default","stable","stableStringify","getLazy","e","safeStringify","isReceiverEvent","event","type","startsWith","parseState","stateJSON","state","State","create","parse","history","parseReceiverEvent","__assign","machine","createMachine","createDevTools","services","Set","serviceListeners","register","service","add","serviceMap","set","sessionId","forEach","listener","onStop","delete","unregister","onRegister","unsubscribe","inspect","options","_a","defaultInspectorOptions","url","devTools","resolvedIframe","iframe","targetWindow","client","resolvedDevTools","inspectMachine","globalThis","__xstate__","Map","sub","initial","context","states","pendingConnection","connected","on","actions","ctx","send","_","scxmlEventObject","origin","unload","disconnect","disconnected","entry","target","assign","initialState","createInspectMachine","inspectService","interpret","start","listeners","subscribe","next","messageHandler","data","contentWindow","postMessage","window","addEventListener","open","id","_event","originalSend","bind","payload","toSCXMLEvent","toEventObject","setAttribute","onError","onComplete","observer","toObserver","removeEventListener","console","warn","createWindowReceiver","_b","ownWindow","_c","self","top","opener","observers","handler","actorRef","stop","clear","createWebSocketReceiver","protocol","ws","WebSocket","server","onopen","onmessage","eventObject_1","error","onerror","err","t","s","n","arguments","p","prototype","hasOwnProperty","apply","document","querySelector"],"mappings":"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","file":"2.chunk.8143e.js","sourcesContent":["module.exports = stringify\nstringify.default = stringify\nstringify.stable = deterministicStringify\nstringify.stableStringify = deterministicStringify\n\nvar arr = []\nvar replacerStack = []\n\n// Regular stringify\nfunction stringify (obj, replacer, spacer) {\n  decirc(obj, '', [], undefined)\n  var res\n  if (replacerStack.length === 0) {\n    res = JSON.stringify(obj, replacer, spacer)\n  } else {\n    res = JSON.stringify(obj, replaceGetterValues(replacer), spacer)\n  }\n  while (arr.length !== 0) {\n    var part = arr.pop()\n    if (part.length === 4) {\n      Object.defineProperty(part[0], part[1], part[3])\n    } else {\n      part[0][part[1]] = part[2]\n    }\n  }\n  return res\n}\nfunction decirc (val, k, stack, parent) {\n  var i\n  if (typeof val === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        var propertyDescriptor = Object.getOwnPropertyDescriptor(parent, k)\n        if (propertyDescriptor.get !== undefined) {\n          if (propertyDescriptor.configurable) {\n            Object.defineProperty(parent, k, { value: '[Circular]' })\n            arr.push([parent, k, val, propertyDescriptor])\n          } else {\n            replacerStack.push([val, k])\n          }\n        } else {\n          parent[k] = '[Circular]'\n          arr.push([parent, k, val])\n        }\n        return\n      }\n    }\n    stack.push(val)\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        decirc(val[i], i, stack, val)\n      }\n    } else {\n      var keys = Object.keys(val)\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i]\n        decirc(val[key], key, stack, val)\n      }\n    }\n    stack.pop()\n  }\n}\n\n// Stable-stringify\nfunction compareFunction (a, b) {\n  if (a < b) {\n    return -1\n  }\n  if (a > b) {\n    return 1\n  }\n  return 0\n}\n\nfunction deterministicStringify (obj, replacer, spacer) {\n  var tmp = deterministicDecirc(obj, '', [], undefined) || obj\n  var res\n  if (replacerStack.length === 0) {\n    res = JSON.stringify(tmp, replacer, spacer)\n  } else {\n    res = JSON.stringify(tmp, replaceGetterValues(replacer), spacer)\n  }\n  while (arr.length !== 0) {\n    var part = arr.pop()\n    if (part.length === 4) {\n      Object.defineProperty(part[0], part[1], part[3])\n    } else {\n      part[0][part[1]] = part[2]\n    }\n  }\n  return res\n}\n\nfunction deterministicDecirc (val, k, stack, parent) {\n  var i\n  if (typeof val === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        var propertyDescriptor = Object.getOwnPropertyDescriptor(parent, k)\n        if (propertyDescriptor.get !== undefined) {\n          if (propertyDescriptor.configurable) {\n            Object.defineProperty(parent, k, { value: '[Circular]' })\n            arr.push([parent, k, val, propertyDescriptor])\n          } else {\n            replacerStack.push([val, k])\n          }\n        } else {\n          parent[k] = '[Circular]'\n          arr.push([parent, k, val])\n        }\n        return\n      }\n    }\n    if (typeof val.toJSON === 'function') {\n      return\n    }\n    stack.push(val)\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        deterministicDecirc(val[i], i, stack, val)\n      }\n    } else {\n      // Create a temporary object in the required way\n      var tmp = {}\n      var keys = Object.keys(val).sort(compareFunction)\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i]\n        deterministicDecirc(val[key], key, stack, val)\n        tmp[key] = val[key]\n      }\n      if (parent !== undefined) {\n        arr.push([parent, k, val])\n        parent[k] = tmp\n      } else {\n        return tmp\n      }\n    }\n    stack.pop()\n  }\n}\n\n// wraps replacer function to handle values we couldn't replace\n// and mark them as [Circular]\nfunction replaceGetterValues (replacer) {\n  replacer = replacer !== undefined ? replacer : function (k, v) { return v }\n  return function (key, val) {\n    if (replacerStack.length > 0) {\n      for (var i = 0; i < replacerStack.length; i++) {\n        var part = replacerStack[i]\n        if (part[1] === key && part[0] === val) {\n          val = '[Circular]'\n          replacerStack.splice(i, 1)\n          break\n        }\n      }\n    }\n    return replacer.call(this, key, val)\n  }\n}\n","import { __assign } from './_virtual/_tslib.js';\nimport { createMachine, State } from 'xstate';\nimport safeStringify from 'fast-safe-stringify';\n\nfunction getLazy(value) {\r\n    return typeof value === 'function' ? value() : value;\r\n}\r\nfunction stringify(value) {\r\n    try {\r\n        return JSON.stringify(value);\r\n    }\r\n    catch (e) {\r\n        return safeStringify(value);\r\n    }\r\n}\r\nfunction isReceiverEvent(event) {\r\n    if (!event) {\r\n        return false;\r\n    }\r\n    try {\r\n        if (typeof event === 'object' &&\r\n            'type' in event &&\r\n            event.type.startsWith('service.')) {\r\n            return true;\r\n        }\r\n    }\r\n    catch (e) {\r\n        return false;\r\n    }\r\n    return false;\r\n}\r\nfunction parseState(stateJSON) {\r\n    var state = State.create(JSON.parse(stateJSON));\r\n    delete state.history;\r\n    return state;\r\n}\r\nfunction parseReceiverEvent(event) {\r\n    switch (event.type) {\r\n        case 'service.event':\r\n            return __assign(__assign({}, event), { event: JSON.parse(event.event) });\r\n        case 'service.register':\r\n            return __assign(__assign({}, event), { machine: createMachine(JSON.parse(event.machine)), state: parseState(event.state) });\r\n        case 'service.state':\r\n            return __assign(__assign({}, event), { state: parseState(event.state) });\r\n        default:\r\n            return event;\r\n    }\r\n}\n\nexport { getLazy, isReceiverEvent, parseReceiverEvent, parseState, stringify };\n","import { __assign } from './_virtual/_tslib.js';\nimport { interpret } from 'xstate';\nimport { toSCXMLEvent, toEventObject, toObserver } from 'xstate/lib/utils';\nimport { getLazy, stringify, isReceiverEvent, parseReceiverEvent } from './utils.js';\nimport { createInspectMachine } from './inspectMachine.js';\n\nvar serviceMap = new Map();\r\nfunction createDevTools() {\r\n    var services = new Set();\r\n    var serviceListeners = new Set();\r\n    return {\r\n        services: services,\r\n        register: function (service) {\r\n            services.add(service);\r\n            serviceMap.set(service.sessionId, service);\r\n            serviceListeners.forEach(function (listener) { return listener(service); });\r\n            service.onStop(function () {\r\n                services.delete(service);\r\n                serviceMap.delete(service.sessionId);\r\n            });\r\n        },\r\n        unregister: function (service) {\r\n            services.delete(service);\r\n            serviceMap.delete(service.sessionId);\r\n        },\r\n        onRegister: function (listener) {\r\n            serviceListeners.add(listener);\r\n            services.forEach(function (service) { return listener(service); });\r\n            return {\r\n                unsubscribe: function () {\r\n                    serviceListeners.delete(listener);\r\n                }\r\n            };\r\n        }\r\n    };\r\n}\r\nvar defaultInspectorOptions = {\r\n    url: 'https://statecharts.io/inspect',\r\n    iframe: function () {\r\n        return document.querySelector('iframe[data-xstate]');\r\n    },\r\n    devTools: function () {\r\n        var devTools = createDevTools();\r\n        globalThis.__xstate__ = devTools;\r\n        return devTools;\r\n    }\r\n};\r\nfunction inspect(options) {\r\n    var _a = __assign(__assign({}, defaultInspectorOptions), options), iframe = _a.iframe, url = _a.url, devTools = _a.devTools;\r\n    var resolvedIframe = getLazy(iframe);\r\n    if (resolvedIframe === null) {\r\n        console.warn('No suitable <iframe> found to embed the inspector. Please pass an <iframe> element to `inspect(iframe)` or create an <iframe data-xstate></iframe> element.');\r\n        return undefined;\r\n    }\r\n    var resolvedDevTools = getLazy(devTools);\r\n    var inspectMachine = createInspectMachine(resolvedDevTools);\r\n    var inspectService = interpret(inspectMachine).start();\r\n    var listeners = new Set();\r\n    var sub = inspectService.subscribe(function (state) {\r\n        listeners.forEach(function (listener) { return listener.next(state); });\r\n    });\r\n    var targetWindow;\r\n    var client;\r\n    var messageHandler = function (event) {\r\n        if (typeof event.data === 'object' &&\r\n            event.data !== null &&\r\n            'type' in event.data) {\r\n            if (resolvedIframe && !targetWindow) {\r\n                targetWindow = resolvedIframe.contentWindow;\r\n            }\r\n            if (!client) {\r\n                client = {\r\n                    send: function (e) {\r\n                        targetWindow.postMessage(e, url);\r\n                    }\r\n                };\r\n            }\r\n            inspectService.send(__assign(__assign({}, event.data), { client: client }));\r\n        }\r\n    };\r\n    window.addEventListener('message', messageHandler);\r\n    window.addEventListener('unload', function () {\r\n        inspectService.send({ type: 'unload' });\r\n    });\r\n    if (resolvedIframe === false) {\r\n        targetWindow = window.open(url, 'xstateinspector');\r\n    }\r\n    resolvedDevTools.onRegister(function (service) {\r\n        var _a;\r\n        inspectService.send({\r\n            type: 'service.register',\r\n            machine: stringify(service.machine),\r\n            state: stringify(service.state || service.initialState),\r\n            sessionId: service.sessionId,\r\n            id: service.id,\r\n            parent: (_a = service.parent) === null || _a === void 0 ? void 0 : _a.sessionId\r\n        });\r\n        inspectService.send({\r\n            type: 'service.event',\r\n            event: stringify((service.state || service.initialState)._event),\r\n            sessionId: service.sessionId\r\n        });\r\n        // monkey-patch service.send so that we know when an event was sent\r\n        // to a service *before* it is processed, since other events might occur\r\n        // while the sent one is being processed, which throws the order off\r\n        var originalSend = service.send.bind(service);\r\n        service.send = function inspectSend(event, payload) {\r\n            inspectService.send({\r\n                type: 'service.event',\r\n                event: stringify(toSCXMLEvent(toEventObject(event, payload))),\r\n                sessionId: service.sessionId\r\n            });\r\n            return originalSend(event, payload);\r\n        };\r\n        service.subscribe(function (state) {\r\n            inspectService.send({\r\n                type: 'service.state',\r\n                state: stringify(state),\r\n                sessionId: service.sessionId\r\n            });\r\n        });\r\n        service.onStop(function () {\r\n            inspectService.send({\r\n                type: 'service.stop',\r\n                sessionId: service.sessionId\r\n            });\r\n        });\r\n    });\r\n    if (resolvedIframe) {\r\n        resolvedIframe.addEventListener('load', function () {\r\n            targetWindow = resolvedIframe.contentWindow;\r\n        });\r\n        resolvedIframe.setAttribute('src', url);\r\n    }\r\n    return {\r\n        send: function (event) {\r\n            inspectService.send(event);\r\n        },\r\n        subscribe: function (next, onError, onComplete) {\r\n            var observer = toObserver(next, onError, onComplete);\r\n            listeners.add(observer);\r\n            return {\r\n                unsubscribe: function () {\r\n                    listeners.delete(observer);\r\n                }\r\n            };\r\n        },\r\n        disconnect: function () {\r\n            inspectService.send('disconnect');\r\n            window.removeEventListener('message', messageHandler);\r\n            sub.unsubscribe();\r\n        }\r\n    };\r\n}\r\nfunction createWindowReceiver(options) {\r\n    var _a = options || {}, _b = _a.window, ownWindow = _b === void 0 ? window : _b, _c = _a.targetWindow, targetWindow = _c === void 0 ? window.self === window.top ? window.opener : window.parent : _c;\r\n    var observers = new Set();\r\n    var handler = function (event) {\r\n        var data = event.data;\r\n        if (isReceiverEvent(data)) {\r\n            observers.forEach(function (listener) { return listener.next(parseReceiverEvent(data)); });\r\n        }\r\n    };\r\n    ownWindow.addEventListener('message', handler);\r\n    var actorRef = {\r\n        id: 'xstate.windowReceiver',\r\n        send: function (event) {\r\n            if (!targetWindow) {\r\n                return;\r\n            }\r\n            targetWindow.postMessage(event, '*');\r\n        },\r\n        subscribe: function (next, onError, onComplete) {\r\n            var observer = toObserver(next, onError, onComplete);\r\n            observers.add(observer);\r\n            return {\r\n                unsubscribe: function () {\r\n                    observers.delete(observer);\r\n                }\r\n            };\r\n        },\r\n        stop: function () {\r\n            observers.clear();\r\n            ownWindow.removeEventListener('message', handler);\r\n        }\r\n    };\r\n    actorRef.send({\r\n        type: 'xstate.inspecting'\r\n    });\r\n    return actorRef;\r\n}\r\nfunction createWebSocketReceiver(options) {\r\n    var _a = options.protocol, protocol = _a === void 0 ? 'ws' : _a;\r\n    var ws = new WebSocket(protocol + \"://\" + options.server);\r\n    var observers = new Set();\r\n    var actorRef = {\r\n        id: 'xstate.webSocketReceiver',\r\n        send: function (event) {\r\n            ws.send(JSON.stringify(event));\r\n        },\r\n        subscribe: function (next, onError, onComplete) {\r\n            var observer = toObserver(next, onError, onComplete);\r\n            observers.add(observer);\r\n            return {\r\n                unsubscribe: function () {\r\n                    observers.delete(observer);\r\n                }\r\n            };\r\n        }\r\n    };\r\n    ws.onopen = function () {\r\n        actorRef.send({\r\n            type: 'xstate.inspecting'\r\n        });\r\n    };\r\n    ws.onmessage = function (event) {\r\n        if (typeof event.data !== 'string') {\r\n            return;\r\n        }\r\n        try {\r\n            var eventObject_1 = JSON.parse(event.data);\r\n            if (isReceiverEvent(eventObject_1)) {\r\n                observers.forEach(function (observer) {\r\n                    observer.next(parseReceiverEvent(eventObject_1));\r\n                });\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n        }\r\n    };\r\n    ws.onerror = function (err) {\r\n        observers.forEach(function (observer) {\r\n            var _a;\r\n            (_a = observer.error) === null || _a === void 0 ? void 0 : _a.call(observer, err);\r\n        });\r\n    };\r\n    return actorRef;\r\n}\n\nexport { createDevTools, createWebSocketReceiver, createWindowReceiver, inspect, serviceMap };\n","import { createMachine, assign } from 'xstate';\nimport { stringify } from './utils.js';\n\nfunction createInspectMachine(devTools) {\r\n    if (devTools === void 0) { devTools = globalThis.__xstate__; }\r\n    var serviceMap = new Map();\r\n    // Listen for services being registered and index them\r\n    // by their sessionId for quicker lookup\r\n    var sub = devTools.onRegister(function (service) {\r\n        serviceMap.set(service.sessionId, service);\r\n    });\r\n    return createMachine({\r\n        initial: 'pendingConnection',\r\n        context: {\r\n            client: undefined\r\n        },\r\n        states: {\r\n            pendingConnection: {},\r\n            connected: {\r\n                on: {\r\n                    'service.state': {\r\n                        actions: function (ctx, e) { return ctx.client.send(e); }\r\n                    },\r\n                    'service.event': {\r\n                        actions: function (ctx, e) { return ctx.client.send(e); }\r\n                    },\r\n                    'service.register': {\r\n                        actions: function (ctx, e) { return ctx.client.send(e); }\r\n                    },\r\n                    'service.stop': {\r\n                        actions: function (ctx, e) { return ctx.client.send(e); }\r\n                    },\r\n                    'xstate.event': {\r\n                        actions: function (_, e) {\r\n                            var event = e.event;\r\n                            var scxmlEventObject = JSON.parse(event);\r\n                            var service = serviceMap.get(scxmlEventObject.origin);\r\n                            service === null || service === void 0 ? void 0 : service.send(scxmlEventObject);\r\n                        }\r\n                    },\r\n                    unload: {\r\n                        actions: function (ctx) {\r\n                            ctx.client.send({ type: 'xstate.disconnect' });\r\n                        }\r\n                    },\r\n                    disconnect: 'disconnected'\r\n                }\r\n            },\r\n            disconnected: {\r\n                entry: function () {\r\n                    sub.unsubscribe();\r\n                },\r\n                type: 'final'\r\n            }\r\n        },\r\n        on: {\r\n            'xstate.inspecting': {\r\n                target: '.connected',\r\n                actions: [\r\n                    assign({\r\n                        client: function (_, e) { return e.client; }\r\n                    }),\r\n                    function (ctx) {\r\n                        devTools.services.forEach(function (service) {\r\n                            var _a;\r\n                            (_a = ctx.client) === null || _a === void 0 ? void 0 : _a.send({\r\n                                type: 'service.register',\r\n                                machine: stringify(service.machine),\r\n                                state: stringify(service.state || service.initialState),\r\n                                sessionId: service.sessionId\r\n                            });\r\n                        });\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    });\r\n}\n\nexport { createInspectMachine };\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nexport { __assign };\n"],"sourceRoot":""}